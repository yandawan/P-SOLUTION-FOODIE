# 安装

## 1 角色
```
1 跟踪服务器(tracker server)
2 存储服务器(storage server)
3 客户端(client)
```

### 2.1 跟踪服务器 tracker server 
```
跟踪服务器，主要做调度工作，起负载均衡的作用
在内存中记录集群中所有存储组和存储服务器的状态信息，是客户端和数据服务器交互的枢纽
相比GFS中的master更为精简，不记录文件索引信息，占用的内存量很少
```

### 2.2 存储服务器 storage server
```
存储服务器（又称：存储节点或数据服务器），文件和文件属性（meta data）都保存到存储服务器上。
Storage server直接利用OS的文件系统调用管理文件。
```

### 2.3 client
```
客户端，作为业务请求的发起方，通过专有接口，使用TCP/IP协议与跟踪器服务器或存储节点进行数据交互。
FastDFS向使用者提供基本文件访问接口，比如upload、download、append、delete等，以客户端库的方式提供给用户使用
```

## 2 文件上传的内部机制
```
首先客户端请求Tracker服务获取到存储服务器的ip地址和端口，然后客户端根据返回的IP地址和端口号请求上传文件，
存储服务器接收到请求后生产文件，
并且将文件内容写入磁盘并返回给客户端file_id、路径信息、文件名等信息，
客户端保存相关信息上传完毕

文件上传的内部机制.png
```